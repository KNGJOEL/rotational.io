<!doctype html><html lang=fr-fr><head><meta charset=utf-8><title>Visualizing Distributed Systems</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Visualizing Distributed Systems"><meta name=author content="Rotational Labs, LLC"><meta name=generator content="Hugo 0.81.0"><link rel=stylesheet href=https://rotational.io/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://rotational.io/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://rotational.io/plugins/magnific-popup/magnific-popup.css><link rel=stylesheet href=https://rotational.io/plugins/slick/slick.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Anaheim%7cQuattrocento+Sans:400,700&display=swap"><link rel=stylesheet href=https://rotational.io/css/style.min.css media=screen><link rel=stylesheet href=https://rotational.io/css/custom.min.css media=screen><link rel="shortcut icon" href=https://rotational.io/images/favicon.png type=image/x-icon><link rel=icon href=https://rotational.io/images/favicon.png type=image/x-icon><script async src="https://www.googletagmanager.com/gtag/js?id=G-2FKX6CWJHW"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-2FKX6CWJHW')</script></head><body id=body data-spy=scroll data-target=.navbar data-offset=55><div id=content><section class="sticky-top navigation"><div class=container><nav class="navbar navbar-expand-lg navbar-dark"><a class="navbar-brand p-0" href=/fr><img class=lozad data-src=https://rotational.io/images/logo.png alt="Rotational Labs" height=42></a>
<button class="navbar-toggler rounded-0" type=button data-toggle=collapse data-target=#navigation>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navigation><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=https://rotational.io/fr/#about>sur</a></li><li class=nav-item><a class=nav-link href=https://rotational.io/fr/#services>un service</a></li><li class=nav-item><a class=nav-link href=https://rotational.io/fr/#team>équipe</a></li><li class=nav-item><a class=nav-link href=https://rotational.io/fr/blog>blog</a></li><li class=nav-item><a class=nav-link href=https://rotational.io/fr/#contact>contact</a></li></ul><select id=select-language onchange="location=this.value"><option id=en value=https://rotational.io/blog/2016-04-26-visualizing-distributed-systems/>En</option><option id=fr value=https://rotational.io/fr/blog/2016-04-26-visualizing-distributed-systems/ selected>Fr</option></select></div></nav></div></section><section class=section><div class=container><div class=row><div class="col-lg-8 offset-lg-2 text-center"><h1>Visualizing Distributed Systems</h1><ul class="list-inline mb-50"><li class=list-inline-item><a href=/fr/author/benjamin-bengfort/>Benjamin Bengfort</a></li><li class=list-inline-item>Tuesday, Apr 26, 2016</li></ul><img class="img-fluid mb-50 lozad" data-src=https://rotational.io/images/blog/savanah_c.jpg alt=blog-image></div><div class="col-lg-8 offset-lg-2"><div class=post-single-content><p>As I&rsquo;ve dug into my distributed systems research, one question keeps coming up:
<em>“How do you visualize distributed systems?”</em> Distributed systems are <a href=https://www.somethingsimilar.com/2013/01/14/notes-on-distributed-systems-for-young-bloods/>hard</a>, so it feels like being able to visualize the data flow would go a long way to understanding them in detail and avoiding bugs. Unfortunately, the same things that make architecting distributed systems difficult also make them hard to visualize.</p><p>I don&rsquo;t have an answer to this question, unfortunately. However, in this post I&rsquo;d like to state my requirements and highlight some visualizations that I think are important. Hopefully this will be the start of a more complete investigation or at least allow others to comment on what they&rsquo;re doing and whether or not visualization is important.</p><h2 id=static-visualization>Static Visualization</h2><p>A distributed system can loosely be described as multiple instances of a software program running on different machines that react to events. These events can be either external (a user making a request) or internal (handling requests from other instances). The collective individual behavior of each node informs how the entire system behaves.</p><p>One high level view of the design of a system looks at the propagation of events, or messages being sent between nodes in the distributed system. This can be visualized using a <a href=https://en.wikipedia.org/wiki/Message_sequence_chart>message sequence chart</a> which embeds the time flow of a system and displays the interaction between nodes as they generate messages in reaction to received messages.</p><p><a href=https://www.cs.cmu.edu/~dga/papers/epaxos-sosp2013.pdf><img src=/images/blog/2016-04-26-epaxos-message-flow.png alt="Paxos Message Flow Diagram"></a></p><p>In the message sequence chart, every lane represents a single replica and arrows between them represent message passing and receipt order. Often, crossed arrows represent the difficulty in determining the <em>happens before</em> relationship with respect to message order. These charts are good at defining a single situation and the reaction of the system, but do not do a good job at describing the general interaction. How do we describe a system in terms of the decisions it must make in reaction to received events that might be unordered?</p><p>One method of designing a distributed system is to consider the design of only a <em>single</em> instance. Each instance reacts to events (messages) then can update their state or do some work, and generate messages of their own. The receipt and sending of messages defines the collective behavior. This is a simplification of the <a href=https://en.wikipedia.org/wiki/Actor_model>actor model</a> of distributed computing. This seems like it might make things a bit easier, because now we only have to visualize the behavior of a single instance, and describe message handling as a flow chart of decision making.</p><p><a href=/images/2016-04-26-raft-message-flow.png><img src=/images/blog/2016-04-26-raft-message-flow.png alt="Flow Chart of Raft Messages"></a></p><p>The flow chart above represents one of the attempts I&rsquo;ve made to describe how the Raft consensus protocol works from the perspective of a single replica server. Raft is generally understood to be one of the most understandable consensus protocols, and as such it should be easy to describe visually. Here, messages are represented as colored circles. Raft has two primary RPC messages: request vote and append entries, therefore the circles represent the send and receive events of both RPC messages and their responses (8 total message types).
Each RPC roughly has their own zone in the flow chart. State changes are represented by the purple boxes, decisions by diamonds, and actions by square boxes. As you can see the flow chart is not completely connected, but hopefully by following from a &ldquo;send&rdquo; node to a &ldquo;recv&rdquo; node, one can track how the system interacts over time as well as individual nodes.</p><p>This visualization still needs a lot of help, however. It is complex, and doesn&rsquo;t necessarily embed all the information of how the complete system handles failure or messages.</p><h2 id=interactive-visualization>Interactive Visualization</h2><p>The most interesting combination of message traffic and behavior that I&rsquo;ve seen so far requires JavaScript to create a dynamic, interactive visualization. Here, the user can play with different scenarios to see how the distributed system will react to different events or scenarios. It visualizes both the decision making process of the replica servers, as well as the ordering of messages as they&rsquo;re sent and received.</p><p><a href=https://raft.github.io/><img src=/images/blog/2016-04-26-raftscope-replay-visualization.png alt="RaftScope Visualization"></a></p><p>One of the first places I encountered this was the <a href=https://raft.github.io/>RaftScope visualization</a>. Here colored balls with an arrow represent the messages themselves (responses are not filled). The state of each node is shown by the edge color (a timer for followers, dotted for candidates, and solid for leaders). The log of each replica server is also displayed to show how the log repairs itself and commits values.</p><p>Moreover, users can also click on nodes and disable them, make &ldquo;client requests&rdquo;, pause, or otherwise modify their behavior. This allows custom scenarios to be constructed and interpreted similar to the message sequence diagram, but with more flexibility. The problem is that the entire protocol must be implemented in JavaScript in order to ensure correct visualization (and is therefore a non-trivial, non-development approach to explaining how a system works).</p><p><a href=http://thesecretlivesofdata.com/raft/><img src=/images/blog/2016-04-26-secret-lives-of-data-raft-visualization.png alt="The Secret Lives of Data"></a></p><p>This idea was taken one step further by <a href=http://thesecretlivesofdata.com/raft/>The Secret Lives of Data</a>, which uses a tutorial style presentation to show in detail each phase of the Raft algorithm. This allows the visualization to show specific scenarios rather than force the user to design them. I hope to see more tutorials for different algorithms soon!</p><p>These two examples inspired me to create my own interactive visualization for the work I&rsquo;m doing on consistency fragmentation. I use a similar design of circles for messages interacting with nodes in a circular topology. Right now it is still unfinished, but I&rsquo;ve at least put together an MVP of what it might look like.</p><p><a href=http://bbengfort.github.io/cloudscope/><img src=/images/blog/2016-04-26-cloudscope-consistency-visualization.png alt="CloudScope Consistency Visualization"></a></p><p>My goal is to feed the visualization actual traces from the backend simulation I&rsquo;m writing using SimPy or from the logs of live systems. The visualization will be less interactive (in the sense you can&rsquo;t create specific scenarios) but will hopefully give insight into what is going on in the real system and allow me easier development and architecture.</p><h2 id=conclusion>Conclusion</h2><p>So I pose to you the following questions:</p><ol><li>Is visualization important to the architecture of distributed systems?</li><li>How can we implement better static and interactive visualizations?</li></ol><p>Visualization is not part of my research, but I hope an important part of describing what is happening in the system. Any feedback would be appreciated!</p></div><div class=mt-5></div></div></div></div></section></div><footer id=footer class=section-bg><div class=container><div class="row wow fadeInUp" data-wow-duration=500ms><div class=col-xl-12><div class=social-icon><ul class=list-inline><li class=list-inline-item><a href=https://twitter.com/rotationalio><i class=ti-twitter-alt></i></a></li><li class=list-inline-item><a href=https://github.com/rotational.io><i class=ti-github></i></a></li><li class=list-inline-item><a href=https://www.linkedin.com/company/71689585/admin/><i class=ti-linkedin></i></a></li></ul></div><div class="copyright text-center"><a href=https://rotational.io/fr/><img src=https://rotational.io/images/logo.png alt="Rotational Labs" height=42></a><br><p>Copyright © 2021 Rotational Labs, LLC · Powered by <a href=https://gethugothemes.com>Hugo</a> · Theme by <a href=https://themefisher.com>Themefisher</a></p></div></div></div></div></footer><script src=https://rotational.io/plugins/jquery/jquery.min.js></script><script src=https://rotational.io/plugins/bootstrap/bootstrap.min.js></script><script src=https://rotational.io/plugins/slick/slick.min.js></script><script src=https://rotational.io/plugins/shuffle/shuffle.min.js></script><script src=https://rotational.io/plugins/magnific-popup/jquery.magnific-popup.min.js></script><script src=https://rotational.io/plugins/lazy-load/lozad.min.js></script><script src=https://rotational.io/plugins/google-map/map.js></script><script src=https://rotational.io/js/script.min.5db5ae6f88052715e823d7c52f3fa7a832565352b0f76c1d2cee2a3b564a0716fa9d51878a9965389c3d856f2d7c6330.js integrity=sha384-XbWub4gFJxXoI9fFLz+nqDJWU1Kw92wdLO4qO1ZKBxb6nVGHipllOJw9hW8tfGMw></script></body></html>